v1.2
<script>
    const uploadBtn = document.getElementById('uploadBtn');
    const video = document.getElementById('cameraFeed');
    const canvas = document.getElementById('canvas');
    const preview = document.getElementById('preview');
    const captureBtn = document.getElementById('captureBtn');
    const imageDataInput = document.getElementById('imageData');
    const submitBtn = document.getElementById('submitBtn');

    let stream;  // Store the camera stream

    // Open camera with high resolution
    uploadBtn.addEventListener('click', async function () {
        try {
            stream = await navigator.mediaDevices.getUserMedia({ 
                video: { 
                    facingMode: "environment",
                    width: { ideal: 1920 }, // Request 1920px width
                    height: { ideal: 1080 } // Request 1080px height
                } 
            });
            video.srcObject = stream;
            video.style.display = "block";
            captureBtn.style.display = "block";
        } catch (error) {
            alert("Camera access denied or unavailable.");
        }
    });

    // Capture image from video feed in high quality
    captureBtn.addEventListener('click', function () {
        const context = canvas.getContext('2d');

        // Use video stream settings to get the best resolution
        const track = stream.getVideoTracks()[0];
        const capabilities = track.getCapabilities();
        canvas.width = capabilities.width.max || video.videoWidth;
        canvas.height = capabilities.height.max || video.videoHeight;

        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        // Convert image to Base64
        const imageData = canvas.toDataURL("image/png", 1.0); // 1.0 = highest quality
        preview.src = imageData;
        preview.style.display = "block";
        imageDataInput.value = imageData;
        submitBtn.style.display = "block";

        // Stop camera
        video.style.display = "none";
        captureBtn.style.display = "none";
        stream.getTracks().forEach(track => track.stop());
    });

</script>
